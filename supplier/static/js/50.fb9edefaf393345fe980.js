webpackJsonp([50],{"38f2":function(e,t){},HgtN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("//Fk"),i=a.n(o),v=a("NYxO"),s={data:function(){return{list1:[],list2:[],videoData:{vedioName:""},isVisible:!1,isDisabled:!0,updateDialog:!1,ImageURL:"",num:"",parentTypeId:[],categoriesName:[],ImageURL1:[],filmTypeList:[],updateAObj:{parentList:[],childList:[]},isLoading:!1,total:0,movieName:"",formLabelWidth:"120px",VMovieVideoUpdateObj:{loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",data:{vf_ve_Type:"",vf_ve_Content:{vf_vo_ID:"",vf_vo_Time:"",vf_vo_Size:"",vf_vo_Extend:"",vf_vo_FileURL:"",vf_vo_AuthorID:"22",vf_vo_Title:"",vf_vo_ImageURL:"",vf_vo_TomImageURL:"",vf_vo_CreateTime:"",vf_vo_Introduce:"",vf_vo_Remark:"",vf_te_IDs:""}}}}},computed:Object(v.b)(["VMovieChildTyeList","VMovieParentTypeList","VMovieVideoList","VMovieChildTyeList2","UploadVideoList","VMovieTypeList"]),created:function(){this.initData(),this.intTypeData()},methods:{intTypeData:function(e,t){var a=this,o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",vf_te_ID:e||"",vf_te_Name:"",vf_te_ParentIDs:t||"0"};this.$store.dispatch("initVMovieSorting",o).then(function(e){a.total=e},function(e){a.$notify({message:e,type:"error"})})},parentChange:function(){this.childTypeData(this.parentTypeId),this.isVisible=!0},updateParentChange:function(){this.childTypeData(this.parentTypeId.join(","))},childTypeData:function(e){var t=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",vf_te_ID:"",vf_te_Name:"",vf_te_ParentIDs:e||"0"};this.$store.dispatch("childTypeData",a).then(function(e){t.total=e},function(e){t.$notify({message:e,type:"error"})})},childTypeData2:function(e){var t=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",vf_te_ID:"",vf_te_Name:"",vf_te_ParentIDs:e||"0"};this.$store.dispatch("childTypeData2",a).then(function(e){t.total=e},function(e){t.$notify({message:e,type:"error"})})},uploadFilm:function(){var e=this,t=new FormData,a=this.$refs.upload.files[0];if(a){var o=a.size;o=parseInt(o/1024*100/100),this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Size=o;var i=a.name;this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Extend=i.split(".")[1],t.append("fileUploadOss",a);var v=new XMLHttpRequest;v.onreadystatechange=function(){if(4==v.readyState&&200==v.status&&v.responseText){var t=JSON.parse(v.responseText).data;e.videoData.vedioName=t,e.$store.dispatch("UploadVideo",e.videoData).then(function(t){e.$notify({message:t,type:"success"}),e.percentage=100,e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_FileURL=e.UploadVideoList;var a=document.getElementById("addVideo");setTimeout(function(){isNaN(a.duration)?e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Time="":e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Time=parseInt(a.duration).toString()},1e3)},function(t){e.$notify({message:t,type:"error"})})}},v.open("POST","http://image.1000da.com.cn/PostImage/PostToOSS",!0),v.send(t)}else alert("请选择上传视频")},handleCurrentChange:function(e){this.initData("",e),this.num=e},initData:function(e,t){var a=this,o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",vf_vo_ID:"",vf_vo_Extend:"",vf_vo_AuthorID:"",vf_vo_Type:"",vf_vo_Title:e||"",vf_vo_PasserID:"",page:t||1,rows:5};this.$store.dispatch("initVMovieVideo",o).then(function(e){a.total=e.totalRows;for(var t in a.VMovieVideoList)a.videoData.vedioName=a.VMovieVideoList[t].vf_vo_FileURL,a.$store.dispatch("UploadVideo",a.videoData),a.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_FileURL=a.UploadVideoList},function(e){a.$notify({message:e,type:"error"})})},search:function(){this.initData(this.movieName)},searchSeries:function(e,t){var a=this,o={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",vf_ss_ID:"",vf_ss_Name:e||"",vf_ss_WriteState:"",vf_ss_AuthorID:"",page:t||1,rows:5};this.$store.dispatch("initVMovieSeries",o).then(function(e){a.total=e},function(e){a.$notify({message:e,type:"error"})})},Add:function(){this.searchSeries("","","",1);for(var e in this.addOptions.data)this.addOptions.data[e]="";this.addDialog=!0,this.$store.commit("setTranstionFalse")},addSubmit:function(){var e=this;this.$store.dispatch("addVMovieVideoSeries",this.addOptions).then(function(t){e.$notify({message:t,type:"success"}),e.initData("",1)},function(t){e.$notify({message:t,type:"error"})}),this.addDialog=!1},uploadImg:function(e){return new i.a(function(t,a){lrz(e).then(function(e){t(e.base64.split(",")[1])})})},uploaNode:function(){var e=this;setTimeout(function(){e.$refs.imgUpload&&e.$refs.imgUpload.addEventListener("change",function(t){for(var a=0;a<e.$refs.imgUpload.files.length;a++)e.uploadImg(e.$refs.imgUpload.files[a]).then(function(t){e.$store.dispatch("UploadnImgs",{imageData:t}).then(function(t){t?e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ImageURL=t.data:e.$notify({message:"图片地址不存在!",type:"error"})})})}),e.$refs.bigImgUpload&&e.$refs.bigImgUpload.addEventListener("change",function(t){for(var a=0;a<e.$refs.bigImgUpload.files.length;a++)e.uploadImg(e.$refs.bigImgUpload.files[a]).then(function(t){e.$store.dispatch("UploadnImgs",{imageData:t}).then(function(t){t?e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_TomImageURL=t.data:e.$notify({message:"图片地址不存在!",type:"error"})})})})},30)},Delete:function(e){var t=this,a={loginUserID:"huileyou",loginUserPass:"123",operateUserID:"",operateUserName:"",pcName:"",data:{vf_vo_ID:e}};this.$store.dispatch("DeleteVMovieVideo",a).then(function(e){t.$notify({message:e,type:"success"}),t.initData(t.movieType,t.num)},function(e){t.$notify({message:e,type:"error"})})},Update:function(e){this.parentTypeId=[],this.categoriesName=[],this.uploaNode(),this.childTypeData(e.vf_vo_Type);for(var t=0;t<e.vf_te_IDs.split(",").length;t++)this.categoriesName.push(Number(e.vf_te_IDs.split(",")[t]));for(var a=0;a<e.vf_vo_Type.split(",").length;a++)this.parentTypeId.push(Number(e.vf_vo_Type.split(",")[a]));this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_te_IDs=this.categoriesName.join(","),this.VMovieVideoUpdateObj.data.vf_ve_Type=e.vf_vo_Type,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Title=e.vf_vo_Title,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Introduce=e.vf_vo_Introduce,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Remark=e.vf_vo_Remark,this.videoData.vedioName=e.vf_vo_FileURL,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ID=e.vf_vo_ID,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Time=e.vf_vo_Time,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Size=e.vf_vo_Size,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Extend=e.vf_vo_Extend,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_FileURL=e.vf_vo_FileURL,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_AuthorID=e.vf_vo_AuthorID,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ImageURL=e.vf_vo_ImageURL,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_TomImageURL=e.vf_vo_TomImageURL,this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_CreateTime=e.vf_vo_CreateTime,this.$store.dispatch("UploadVideo",this.videoData),this.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_FileURL=this.UploadVideoList,this.updateDialog=!0,this.$store.commit("setTranstionFalse")},updateSubmit:function(){var e=this;this.$store.dispatch("updateVMovieVideo",this.VMovieVideoUpdateObj).then(function(t){e.$notify({message:t,type:"success"}),e.initData(e.movieType,e.num)},function(t){e.$notify({message:t,type:"error"})}),this.updateDialog=!1}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"clearfix",attrs:{id:"wrap"}},[a("h1",{staticClass:"userClass"},[e._v("视频")]),e._v(" "),a("el-col",{staticClass:"formSearch",attrs:{span:24}},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("span",[e._v("视频:")]),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{type:"text","auto-complete":"off",placeholder:"视频名称"},model:{value:e.movieName,callback:function(t){e.movieName=t},expression:"movieName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:e.VMovieVideoList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"视频编号:"}},[a("span",[e._v(e._s(t.row.vf_vo_ID))])]),e._v(" "),a("el-form-item",{attrs:{label:"时长:"}},[a("span",[e._v(e._s(t.row.vf_vo_Time))])]),e._v(" "),a("el-form-item",{attrs:{label:"大小:"}},[a("span",[e._v(e._s(t.row.vf_vo_Size))])]),e._v(" "),a("el-form-item",{attrs:{label:"分类:","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(t.row.vf_te_IDNames))])]),e._v(" "),a("el-form-item",{attrs:{label:"文件扩展名:"}},[a("span",[e._v(e._s(t.row.vf_vo_Extend))])]),e._v(" "),a("el-form-item",{attrs:{label:"视频:"}},[a("video",{attrs:{src:t.row.vf_vo_TempFileURL,width:"320",height:"240",controls:"controls"}})]),e._v(" "),a("el-form-item",{attrs:{label:"作者:"}},[a("span",[e._v(e._s(t.row.vf_vo_AuthorName))])]),e._v(" "),a("el-form-item",{attrs:{label:"视频类型:"}},[a("span",[e._v(e._s(t.row.vf_vo_TypeName))])]),e._v(" "),a("el-form-item",{attrs:{label:"标题:"}},[a("span",[e._v(e._s(t.row.vf_vo_Title))])]),e._v(" "),a("el-form-item",{attrs:{label:"视频图片:"}},[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.vf_vo_ImageURL,alt:""}})]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间:"}},[a("span",[e._v(e._s(t.row.vf_vo_CreateTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"审核人编码:"}},[a("span",[e._v(e._s(t.row.vf_vo_PasserID))])]),e._v(" "),a("el-form-item",{attrs:{label:"审核时间:"}},[a("span",[e._v(e._s(t.row.vf_vo_ValidateTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"简介:"}},[a("span",[e._v(e._s(t.row.vf_vo_Introduce))])]),e._v(" "),a("el-form-item",{attrs:{label:"详情:"}},[a("span",[e._v(e._s(t.row.vf_vo_Remark))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"视频编号",prop:"vf_vo_ID"}}),e._v(" "),a("el-table-column",{attrs:{label:"作者",prop:"vf_vo_AuthorName"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"vf_vo_Title"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.Update(t.row)}}},[e._v("修改\n            ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.Delete(t.row.vf_vo_ID)}}},[e._v("删除\n            ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"right"}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total,expression:"total"}],attrs:{"page-size":5,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.updateDialog},on:{"update:visible":function(t){e.updateDialog=t}}},[a("el-form",{attrs:{model:e.VMovieVideoUpdateObj}},[a("el-form-item",{attrs:{label:"视频编号:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"视频编号",disabled:e.isDisabled},model:{value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ID,callback:function(t){e.$set(e.VMovieVideoUpdateObj.data.vf_ve_Content,"vf_vo_ID",t)},expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电影类型筛选:","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择电影类型"},on:{change:e.updateParentChange},model:{value:e.parentTypeId,callback:function(t){e.parentTypeId=t},expression:"parentTypeId"}},e._l(e.VMovieTypeList,function(e){return a("el-option",{key:e.vf_te_ID,attrs:{label:e.vf_te_Name,value:e.vf_te_ID}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名称:","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择分类名称"},model:{value:e.categoriesName,callback:function(t){e.categoriesName=t},expression:"categoriesName"}},e._l(e.VMovieChildTyeList,function(e){return a("el-option",{key:e.vf_te_ID,attrs:{label:e.vf_te_Name,value:e.vf_te_ID}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"首页大图:","label-width":e.formLabelWidth}},[a("a",{staticClass:"file",attrs:{href:"javascript:;"}},[e._v("\n              视频图片上传\n              "),a("input",{ref:"bigImgUpload",attrs:{type:"file",name:"",accept:"image/*"}})]),e._v(" "),a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_TomImageURL,expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_TomImageURL"},{name:"show",rawName:"v-show",value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_TomImageURL,expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_TomImageURL"}],staticStyle:{width:"100px",height:"100px"}})]),e._v(" "),a("el-form-item",{attrs:{label:"视频图片:","label-width":e.formLabelWidth}},[a("a",{staticClass:"file",attrs:{href:"javascript:;"}},[e._v("\n              视频图片上传\n              "),a("input",{ref:"imgUpload",attrs:{type:"file",name:"",accept:"image/*"}})]),e._v(" "),a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ImageURL,expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ImageURL"},{name:"show",rawName:"v-show",value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ImageURL,expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_ImageURL"}],staticStyle:{width:"100px",height:"100px"}})]),e._v(" "),a("el-form-item",{attrs:{label:"上传视频:","label-width":e.formLabelWidth}},[a("a",{staticClass:"file",attrs:{href:"javascript:;"}},[e._v("上传视频\n              "),a("input",{ref:"upload",attrs:{type:"file",name:"",multiple:""}})]),e._v(" "),a("video",{attrs:{id:"addVideo",src:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_FileURL,width:"320",height:"240",controls:"controls"}})]),e._v(" "),a("el-form-item",{attrs:{size:"large","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.uploadFilm}},[e._v("立即上传")])],1),e._v(" "),a("el-form-item",{attrs:{label:"视频类型:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"视频类型"},model:{value:e.VMovieVideoUpdateObj.data.vf_ve_Type,callback:function(t){e.$set(e.VMovieVideoUpdateObj.data,"vf_ve_Type",t)},expression:"VMovieVideoUpdateObj.data.vf_ve_Type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Title,callback:function(t){e.$set(e.VMovieVideoUpdateObj.data.vf_ve_Content,"vf_vo_Title",t)},expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"简介"},model:{value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Introduce,callback:function(t){e.$set(e.VMovieVideoUpdateObj.data.vf_ve_Content,"vf_vo_Introduce",t)},expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Introduce"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Remark,callback:function(t){e.$set(e.VMovieVideoUpdateObj.data.vf_ve_Content,"vf_vo_Remark",t)},expression:"VMovieVideoUpdateObj.data.vf_ve_Content.vf_vo_Remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateSubmit}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]},l=a("VU/8")(s,n,!1,function(e){a("38f2")},"data-v-2efe5613",null);t.default=l.exports}});